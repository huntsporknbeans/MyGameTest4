<!DOCTYPE HTML>
<html>
<head>
  <meta charset="UTF-8"/>
  <title>index.html</title>
  <style>
    body {
      background: #121212;
      color: #d9d9d9;
    }
    pre {
      font-family: ui-monospace, monospace;
      font-size: 12px;
      white-space: pre-wrap;
    }
    .codehilite {
      margin: 20px;
    }
  </style>
  <style>.codehilite .kd { color: #fc5fa2 }
.codehilite .vg { color: #a266e7 }
.codehilite .py { color: #42a0c0 }
.codehilite .sx { color: #fb6a5d }
.codehilite .il { color: #d0bf6a }
.codehilite .fm { color: #a266e7 }
.codehilite .bp { color: #d1a8ff }
.codehilite .nt { color: #fc5fa2 }
.codehilite .cm { color: #6b7985 }
.codehilite .ss { color: #fb6a5d }
.codehilite .c1 { color: #6b7985 }
.codehilite .gd { color: #6b7985 }
.codehilite .nc { color: #9df1dd }
.codehilite .nf { color: #66b6a4 }
.codehilite .vm { color: #a266e7 }
.codehilite .ges { color: #d0bf6a }
.codehilite .na { color: #bf8455 }
.codehilite .sc { color: #d0bf6a }
.codehilite .se { color: #d0bf6a }
.codehilite .pm { color: #d9d9d9 }
.codehilite .kc { color: #fc5fa2 }
.codehilite .g { color: #d9d9d9 }
.codehilite .vi { color: #42a0c0 }
.codehilite .s2 { color: #fb6a5d }
.codehilite .ge { color: #fb6a5d }
.codehilite .ne { color: #d1a8ff }
.codehilite .k { color: #fc5fa2 }
.codehilite .kn { color: #fc5fa2 }
.codehilite .no { color: #d1a8ff }
.codehilite .p { color: #d9d9d9 }
.codehilite .m { color: #d0bf6a }
.codehilite .l { color: #d0bf6a }
.codehilite .nn { color: #d9d9d9 }
.codehilite .mh { color: #d0bf6a }
.codehilite .gt { color: #fb6a5d }
.codehilite .s1 { color: #fb6a5d }
.codehilite .err { color: #d9d9d9 }
.codehilite .esc { color: #d9d9d9 }
.codehilite .nb { color: #fc5fa2 }
.codehilite .kr { color: #fc5fa2 }
.codehilite .ld { color: #d0bf6a }
.codehilite .go { color: #818181 }
.codehilite .n { color: #d9d9d9 }
.codehilite .sh { color: #91a1b0 }
.codehilite .mi { color: #d0bf6a }
.codehilite .kp { color: #fc5fa2 }
.codehilite .ch { color: #91a1b0 }
.codehilite .cd { color: #5dd7ff }
.codehilite .gs { color: #d0bf6a }
.codehilite .nd { color: #fc5fa2 }
.codehilite .cpf { color: #fb6a5d }
.codehilite .ga { color: #ffffff }
.codehilite .nv { color: #d9d9d9 }
.codehilite .sd { color: #91a1b0 }
.codehilite .sr { color: #fb6a5d }
.codehilite .gr { color: #fb6a5d }
.codehilite .gh { color: #f12ad1 }
.codehilite .dl { color: #fb6a5d }
.codehilite .sb { color: #d0bf6a }
.codehilite .sa { color: #fb6a5d }
.codehilite .c { color: #6b7985 }
.codehilite .vc { color: #42a0c0 }
.codehilite .mo { color: #d0bf6a }
.codehilite .ow { color: #fc5fa2 }
.codehilite .gp { color: #42b545 }
.codehilite .ni { color: #d0bf6a }
.codehilite .s { color: #fb6a5d }
.codehilite .mb { color: #d0bf6a }
.codehilite .gu { color: #f12ad1 }
.codehilite .w { color: #d9d9d9 }
.codehilite .nl { color: #a266e7 }
.codehilite .x { color: #d9d9d9 }
.codehilite .nx { color: #d9d9d9 }
.codehilite .o { color: #d9d9d9 }
.codehilite .mf { color: #d0bf6a }
.codehilite .si { color: #d9d9d9 }
.codehilite .kt { color: #fc5fa2 }
.codehilite .cs { color: #91a1b0 }
.codehilite .cp { color: #fd8e3e }
.codehilite .gi { color: #42b545 }
.codehilite .hll {
    display: block;
    background-color: rgba(58, 49, 31, 1.000);
}</style>
</head>
<body>
  <pre class="codehilite">
<span class="cp" data-token="Comment.Preproc">&lt;!DOCTYPE html&gt;</span>
&lt;<span class="nt" data-token="Name.Tag">html</span> <span class="na" data-token="Name.Attribute">lang</span><span class="o" data-token="Operator">=</span><span class="s" data-token="Literal.String">&quot;en&quot;</span>&gt;
&lt;<span class="nt" data-token="Name.Tag">head</span>&gt;
  &lt;<span class="nt" data-token="Name.Tag">meta</span> <span class="na" data-token="Name.Attribute">charset</span><span class="o" data-token="Operator">=</span><span class="s" data-token="Literal.String">&quot;UTF-8&quot;</span> /&gt;
  &lt;<span class="nt" data-token="Name.Tag">meta</span> <span class="na" data-token="Name.Attribute">name</span><span class="o" data-token="Operator">=</span><span class="s" data-token="Literal.String">&quot;viewport&quot;</span> <span class="na" data-token="Name.Attribute">content</span><span class="o" data-token="Operator">=</span><span class="s" data-token="Literal.String">&quot;width=device-width, initial-scale=1&quot;</span> /&gt;
  &lt;<span class="nt" data-token="Name.Tag">title</span>&gt;Chibi Catch – Jan <span class="err" data-token="Error">&amp;</span> Chewie&lt;/<span class="nt" data-token="Name.Tag">title</span>&gt;
  &lt;<span class="nt" data-token="Name.Tag">style</span>&gt;
    :<span class="bp" data-token="Name.Builtin.Pseudo">root</span>{ <span class="nv" data-token="Name.Variable">--panel</span>:<span class="nf" data-token="Name.Function">rgba</span>(<span class="mi" data-token="Literal.Number.Integer">255</span>,<span class="mi" data-token="Literal.Number.Integer">255</span>,<span class="mi" data-token="Literal.Number.Integer">255</span>,<span class="mf" data-token="Literal.Number.Float">.92</span>); }
    <span class="o" data-token="Operator">*</span>{<span class="k" data-token="Keyword">box-sizing</span>:<span class="kc" data-token="Keyword.Constant">border-box</span>}
    <span class="nn" data-token="Name.Namespace">html</span><span class="o" data-token="Operator">,</span><span class="nn" data-token="Name.Namespace">body</span>{<span class="k" data-token="Keyword">height</span>:<span class="mi" data-token="Literal.Number.Integer">100</span><span class="l" data-token="Literal">%</span>}
    <span class="nn" data-token="Name.Namespace">body</span>{ <span class="k" data-token="Keyword">margin</span>:<span class="mi" data-token="Literal.Number.Integer">0</span>; <span class="k" data-token="Keyword">background</span>:<span class="mh" data-token="Literal.Number.Hex">#0b0b0b</span>; <span class="k" data-token="Keyword">color</span>:<span class="mh" data-token="Literal.Number.Hex">#111</span>; <span class="k" data-token="Keyword">display</span>:<span class="kc" data-token="Keyword.Constant">grid</span>; <span class="k" data-token="Keyword">place-items</span>:<span class="kc" data-token="Keyword.Constant">center</span>; <span class="k" data-token="Keyword">overflow</span>:<span class="kc" data-token="Keyword.Constant">hidden</span>; <span class="k" data-token="Keyword">font-family</span>: <span class="kc" data-token="Keyword.Constant">ui-sans-serif</span>, <span class="kc" data-token="Keyword.Constant">system-ui</span>, <span class="o" data-token="Operator">-</span>apple-system, Segoe UI, Roboto, <span class="s2" data-token="Literal.String.Double">&quot;Helvetica Neue&quot;</span>, Arial; }
    <span class="nn" data-token="Name.Namespace">canvas</span>{ <span class="k" data-token="Keyword">width</span>:<span class="nf" data-token="Name.Function">min</span>(<span class="mi" data-token="Literal.Number.Integer">96</span><span class="l" data-token="Literal">vw</span>, <span class="mi" data-token="Literal.Number.Integer">960</span><span class="l" data-token="Literal">px</span>); <span class="k" data-token="Keyword">height</span>:<span class="kc" data-token="Keyword.Constant">auto</span>; <span class="k" data-token="Keyword">aspect-ratio</span>: <span class="mi" data-token="Literal.Number.Integer">3</span><span class="o" data-token="Operator">/</span><span class="mi" data-token="Literal.Number.Integer">2</span>; <span class="k" data-token="Keyword">image-rendering</span>: <span class="kc" data-token="Keyword.Constant">pixelated</span>; <span class="k" data-token="Keyword">background</span>:<span class="mh" data-token="Literal.Number.Hex">#000</span>; <span class="k" data-token="Keyword">border</span>:<span class="mi" data-token="Literal.Number.Integer">4</span><span class="l" data-token="Literal">px</span> <span class="kc" data-token="Keyword.Constant">solid</span> <span class="mh" data-token="Literal.Number.Hex">#000</span>; <span class="k" data-token="Keyword">border-radius</span>:<span class="mi" data-token="Literal.Number.Integer">12</span><span class="l" data-token="Literal">px</span>; <span class="k" data-token="Keyword">display</span>:<span class="kc" data-token="Keyword.Constant">block</span>; }
    .<span class="nn" data-token="Name.Namespace">overlay</span>{ <span class="k" data-token="Keyword">position</span>:<span class="kc" data-token="Keyword.Constant">fixed</span>; <span class="k" data-token="Keyword">inset</span>:<span class="mi" data-token="Literal.Number.Integer">0</span>; <span class="k" data-token="Keyword">display</span>:<span class="kc" data-token="Keyword.Constant">grid</span>; <span class="k" data-token="Keyword">place-items</span>:<span class="kc" data-token="Keyword.Constant">center</span>; }
    .<span class="nn" data-token="Name.Namespace">card</span>{ <span class="k" data-token="Keyword">background</span>:<span class="nf" data-token="Name.Function">var</span>(<span class="nv" data-token="Name.Variable">--panel</span>); <span class="k" data-token="Keyword">color</span>:<span class="mh" data-token="Literal.Number.Hex">#111</span>; <span class="k" data-token="Keyword">border</span>:<span class="mi" data-token="Literal.Number.Integer">3</span><span class="l" data-token="Literal">px</span> <span class="kc" data-token="Keyword.Constant">solid</span> <span class="mh" data-token="Literal.Number.Hex">#000</span>; <span class="k" data-token="Keyword">border-radius</span>:<span class="mi" data-token="Literal.Number.Integer">14</span><span class="l" data-token="Literal">px</span>; <span class="k" data-token="Keyword">padding</span>:<span class="mi" data-token="Literal.Number.Integer">18</span><span class="l" data-token="Literal">px</span> <span class="mi" data-token="Literal.Number.Integer">22</span><span class="l" data-token="Literal">px</span>; <span class="k" data-token="Keyword">box-shadow</span>:<span class="mi" data-token="Literal.Number.Integer">0</span> <span class="mi" data-token="Literal.Number.Integer">10</span><span class="l" data-token="Literal">px</span> <span class="mi" data-token="Literal.Number.Integer">30</span><span class="l" data-token="Literal">px</span> <span class="nf" data-token="Name.Function">rgba</span>(<span class="mi" data-token="Literal.Number.Integer">0</span>,<span class="mi" data-token="Literal.Number.Integer">0</span>,<span class="mi" data-token="Literal.Number.Integer">0</span>,<span class="mf" data-token="Literal.Number.Float">.5</span>); <span class="k" data-token="Keyword">text-align</span>:<span class="kc" data-token="Keyword.Constant">center</span>; }
    .<span class="nn" data-token="Name.Namespace">title</span>{ <span class="k" data-token="Keyword">font-size</span>:<span class="nf" data-token="Name.Function">clamp</span>(<span class="mi" data-token="Literal.Number.Integer">22</span><span class="l" data-token="Literal">px</span>,<span class="mf" data-token="Literal.Number.Float">3.2</span><span class="l" data-token="Literal">vw</span>,<span class="mi" data-token="Literal.Number.Integer">32</span><span class="l" data-token="Literal">px</span>); <span class="k" data-token="Keyword">font-weight</span>:<span class="mi" data-token="Literal.Number.Integer">800</span>; <span class="k" data-token="Keyword">letter-spacing</span>:<span class="mf" data-token="Literal.Number.Float">.5</span><span class="l" data-token="Literal">px</span>; <span class="k" data-token="Keyword">margin</span>:<span class="mi" data-token="Literal.Number.Integer">0</span> <span class="mi" data-token="Literal.Number.Integer">0</span> <span class="mf" data-token="Literal.Number.Float">.2</span><span class="l" data-token="Literal">em</span>; }
    .<span class="nn" data-token="Name.Namespace">sub</span>{ <span class="k" data-token="Keyword">margin</span>:<span class="mf" data-token="Literal.Number.Float">.2</span><span class="l" data-token="Literal">em</span> <span class="mi" data-token="Literal.Number.Integer">0</span> <span class="mi" data-token="Literal.Number.Integer">1</span><span class="l" data-token="Literal">em</span>; <span class="k" data-token="Keyword">opacity</span>:<span class="mf" data-token="Literal.Number.Float">.8</span> }
    .<span class="nn" data-token="Name.Namespace">row</span>{ <span class="k" data-token="Keyword">display</span>:<span class="kc" data-token="Keyword.Constant">flex</span>; <span class="k" data-token="Keyword">gap</span>:<span class="mi" data-token="Literal.Number.Integer">10</span><span class="l" data-token="Literal">px</span>; <span class="k" data-token="Keyword">justify-content</span>:<span class="kc" data-token="Keyword.Constant">center</span>; <span class="k" data-token="Keyword">flex-wrap</span>:<span class="kc" data-token="Keyword.Constant">wrap</span> }
    <span class="nn" data-token="Name.Namespace">button</span>{ <span class="k" data-token="Keyword">cursor</span>:<span class="kc" data-token="Keyword.Constant">pointer</span>; <span class="k" data-token="Keyword">border</span>:<span class="mi" data-token="Literal.Number.Integer">3</span><span class="l" data-token="Literal">px</span> <span class="kc" data-token="Keyword.Constant">solid</span> <span class="mh" data-token="Literal.Number.Hex">#000</span>; <span class="k" data-token="Keyword">border-radius</span>:<span class="mi" data-token="Literal.Number.Integer">12</span><span class="l" data-token="Literal">px</span>; <span class="k" data-token="Keyword">background</span>:<span class="mh" data-token="Literal.Number.Hex">#ffd44d</span>; <span class="k" data-token="Keyword">padding</span>:<span class="mi" data-token="Literal.Number.Integer">10</span><span class="l" data-token="Literal">px</span> <span class="mi" data-token="Literal.Number.Integer">16</span><span class="l" data-token="Literal">px</span>; <span class="k" data-token="Keyword">font-weight</span>:<span class="mi" data-token="Literal.Number.Integer">800</span>; <span class="k" data-token="Keyword">box-shadow</span>:<span class="mi" data-token="Literal.Number.Integer">0</span> <span class="mi" data-token="Literal.Number.Integer">2</span><span class="l" data-token="Literal">px</span> <span class="mi" data-token="Literal.Number.Integer">0</span> <span class="mh" data-token="Literal.Number.Hex">#000</span>; }
    <span class="nn" data-token="Name.Namespace">button</span>:<span class="bp" data-token="Name.Builtin.Pseudo">active</span>{ <span class="k" data-token="Keyword">transform</span>:<span class="nf" data-token="Name.Function">translateY</span>(<span class="mi" data-token="Literal.Number.Integer">1</span><span class="l" data-token="Literal">px</span>); <span class="k" data-token="Keyword">box-shadow</span>:<span class="mi" data-token="Literal.Number.Integer">0</span> <span class="mi" data-token="Literal.Number.Integer">1</span><span class="l" data-token="Literal">px</span> <span class="mi" data-token="Literal.Number.Integer">0</span> <span class="mh" data-token="Literal.Number.Hex">#000</span>; }
    <span class="c" data-token="Comment">/* Mobile controls */</span>
    #<span class="nn" data-token="Name.Namespace">controls</span>{ <span class="k" data-token="Keyword">position</span>:<span class="kc" data-token="Keyword.Constant">fixed</span>; <span class="k" data-token="Keyword">left</span>:<span class="mi" data-token="Literal.Number.Integer">0</span>; <span class="k" data-token="Keyword">right</span>:<span class="mi" data-token="Literal.Number.Integer">0</span>; <span class="k" data-token="Keyword">bottom</span>:<span class="mi" data-token="Literal.Number.Integer">16</span><span class="l" data-token="Literal">px</span>; <span class="k" data-token="Keyword">display</span>:<span class="kc" data-token="Keyword.Constant">flex</span>; <span class="k" data-token="Keyword">justify-content</span>:<span class="kc" data-token="Keyword.Constant">space-between</span>; <span class="k" data-token="Keyword">padding</span>:<span class="mi" data-token="Literal.Number.Integer">0</span> <span class="mi" data-token="Literal.Number.Integer">24</span><span class="l" data-token="Literal">px</span>; <span class="k" data-token="Keyword">pointer-events</span>:<span class="kc" data-token="Keyword.Constant">none</span>; }
    .<span class="nn" data-token="Name.Namespace">btn</span>{ <span class="k" data-token="Keyword">width</span>:<span class="mi" data-token="Literal.Number.Integer">80</span><span class="l" data-token="Literal">px</span>; <span class="k" data-token="Keyword">height</span>:<span class="mi" data-token="Literal.Number.Integer">80</span><span class="l" data-token="Literal">px</span>; <span class="k" data-token="Keyword">border-radius</span>:<span class="mi" data-token="Literal.Number.Integer">50</span><span class="l" data-token="Literal">%</span>; <span class="k" data-token="Keyword">background</span>:<span class="nf" data-token="Name.Function">rgba</span>(<span class="mi" data-token="Literal.Number.Integer">0</span>,<span class="mi" data-token="Literal.Number.Integer">0</span>,<span class="mi" data-token="Literal.Number.Integer">0</span>,<span class="mf" data-token="Literal.Number.Float">.55</span>); <span class="k" data-token="Keyword">color</span>:<span class="mh" data-token="Literal.Number.Hex">#fff</span>; <span class="k" data-token="Keyword">border</span>:<span class="mi" data-token="Literal.Number.Integer">2</span><span class="l" data-token="Literal">px</span> <span class="kc" data-token="Keyword.Constant">solid</span> <span class="mh" data-token="Literal.Number.Hex">#fff</span>; <span class="k" data-token="Keyword">display</span>:<span class="kc" data-token="Keyword.Constant">grid</span>; <span class="k" data-token="Keyword">place-items</span>:<span class="kc" data-token="Keyword.Constant">center</span>; <span class="k" data-token="Keyword">font-size</span>:<span class="mi" data-token="Literal.Number.Integer">30</span><span class="l" data-token="Literal">px</span>; <span class="k" data-token="Keyword">user-select</span>:<span class="kc" data-token="Keyword.Constant">none</span>; <span class="k" data-token="Keyword">pointer-events</span>:<span class="kc" data-token="Keyword.Constant">auto</span> }
    #<span class="nn" data-token="Name.Namespace">centerBtn</span>{ <span class="k" data-token="Keyword">position</span>:<span class="kc" data-token="Keyword.Constant">fixed</span>; <span class="k" data-token="Keyword">left</span>:<span class="mi" data-token="Literal.Number.Integer">50</span><span class="l" data-token="Literal">%</span>; <span class="k" data-token="Keyword">transform</span>:<span class="nf" data-token="Name.Function">translateX</span>(<span class="nv" data-token="Name.Variable">-50</span><span class="err" data-token="Error">%</span>); <span class="k" data-token="Keyword">bottom</span>:<span class="mi" data-token="Literal.Number.Integer">16</span><span class="l" data-token="Literal">px</span> }
    .<span class="nn" data-token="Name.Namespace">help</span>{ <span class="k" data-token="Keyword">position</span>:<span class="kc" data-token="Keyword.Constant">fixed</span>; <span class="k" data-token="Keyword">top</span>:<span class="mi" data-token="Literal.Number.Integer">10</span><span class="l" data-token="Literal">px</span>; <span class="k" data-token="Keyword">right</span>:<span class="mi" data-token="Literal.Number.Integer">10</span><span class="l" data-token="Literal">px</span>; <span class="k" data-token="Keyword">background</span>:<span class="nf" data-token="Name.Function">var</span>(<span class="nv" data-token="Name.Variable">--panel</span>); <span class="k" data-token="Keyword">border</span>:<span class="mi" data-token="Literal.Number.Integer">2</span><span class="l" data-token="Literal">px</span> <span class="kc" data-token="Keyword.Constant">solid</span> <span class="mh" data-token="Literal.Number.Hex">#000</span>; <span class="k" data-token="Keyword">border-radius</span>:<span class="mi" data-token="Literal.Number.Integer">10</span><span class="l" data-token="Literal">px</span>; <span class="k" data-token="Keyword">padding</span>:<span class="mi" data-token="Literal.Number.Integer">6</span><span class="l" data-token="Literal">px</span> <span class="mi" data-token="Literal.Number.Integer">10</span><span class="l" data-token="Literal">px</span>; <span class="k" data-token="Keyword">font-size</span>:<span class="mi" data-token="Literal.Number.Integer">12</span><span class="l" data-token="Literal">px</span> }
  &lt;/<span class="nt" data-token="Name.Tag">style</span>&gt;
&lt;/<span class="nt" data-token="Name.Tag">head</span>&gt;
&lt;<span class="nt" data-token="Name.Tag">body</span>&gt;
  &lt;<span class="nt" data-token="Name.Tag">canvas</span> <span class="na" data-token="Name.Attribute">id</span><span class="o" data-token="Operator">=</span><span class="s" data-token="Literal.String">&quot;game&quot;</span> <span class="na" data-token="Name.Attribute">width</span><span class="o" data-token="Operator">=</span><span class="s" data-token="Literal.String">&quot;480&quot;</span> <span class="na" data-token="Name.Attribute">height</span><span class="o" data-token="Operator">=</span><span class="s" data-token="Literal.String">&quot;320&quot;</span>&gt;&lt;/<span class="nt" data-token="Name.Tag">canvas</span>&gt;

  <span class="cm" data-token="Comment.Multiline">&lt;!-- Start / Win overlays --&gt;</span>
  &lt;<span class="nt" data-token="Name.Tag">div</span> <span class="na" data-token="Name.Attribute">class</span><span class="o" data-token="Operator">=</span><span class="s" data-token="Literal.String">&quot;overlay&quot;</span> <span class="na" data-token="Name.Attribute">id</span><span class="o" data-token="Operator">=</span><span class="s" data-token="Literal.String">&quot;startOverlay&quot;</span>&gt;
    &lt;<span class="nt" data-token="Name.Tag">div</span> <span class="na" data-token="Name.Attribute">class</span><span class="o" data-token="Operator">=</span><span class="s" data-token="Literal.String">&quot;card&quot;</span>&gt;
      &lt;<span class="nt" data-token="Name.Tag">h1</span> <span class="na" data-token="Name.Attribute">class</span><span class="o" data-token="Operator">=</span><span class="s" data-token="Literal.String">&quot;title&quot;</span>&gt;Chibi Catch 💖&lt;/<span class="nt" data-token="Name.Tag">h1</span>&gt;
      &lt;<span class="nt" data-token="Name.Tag">p</span> <span class="na" data-token="Name.Attribute">class</span><span class="o" data-token="Operator">=</span><span class="s" data-token="Literal.String">&quot;sub&quot;</span>&gt;Move &lt;<span class="nt" data-token="Name.Tag">b</span>&gt;Jan&lt;/<span class="nt" data-token="Name.Tag">b</span>&gt; with ← →. Catch 20 falling hearts!&lt;<span class="nt" data-token="Name.Tag">br</span>/&gt;Control &lt;<span class="nt" data-token="Name.Tag">b</span>&gt;Chewie&lt;/<span class="nt" data-token="Name.Tag">b</span>&gt; with A/D, or tap/click him / press 🐶.&lt;/<span class="nt" data-token="Name.Tag">p</span>&gt;
      &lt;<span class="nt" data-token="Name.Tag">div</span> <span class="na" data-token="Name.Attribute">class</span><span class="o" data-token="Operator">=</span><span class="s" data-token="Literal.String">&quot;row&quot;</span>&gt;&lt;<span class="nt" data-token="Name.Tag">button</span> <span class="na" data-token="Name.Attribute">id</span><span class="o" data-token="Operator">=</span><span class="s" data-token="Literal.String">&quot;startBtn&quot;</span>&gt;Start&lt;/<span class="nt" data-token="Name.Tag">button</span>&gt;&lt;/<span class="nt" data-token="Name.Tag">div</span>&gt;
    &lt;/<span class="nt" data-token="Name.Tag">div</span>&gt;
  &lt;/<span class="nt" data-token="Name.Tag">div</span>&gt;

  &lt;<span class="nt" data-token="Name.Tag">div</span> <span class="na" data-token="Name.Attribute">class</span><span class="o" data-token="Operator">=</span><span class="s" data-token="Literal.String">&quot;overlay&quot;</span> <span class="na" data-token="Name.Attribute">id</span><span class="o" data-token="Operator">=</span><span class="s" data-token="Literal.String">&quot;winOverlay&quot;</span> <span class="na" data-token="Name.Attribute">style</span><span class="o" data-token="Operator">=</span><span class="s" data-token="Literal.String">&quot;display:none&quot;</span>&gt;
    &lt;<span class="nt" data-token="Name.Tag">div</span> <span class="na" data-token="Name.Attribute">class</span><span class="o" data-token="Operator">=</span><span class="s" data-token="Literal.String">&quot;card&quot;</span>&gt;
      &lt;<span class="nt" data-token="Name.Tag">h1</span> <span class="na" data-token="Name.Attribute">class</span><span class="o" data-token="Operator">=</span><span class="s" data-token="Literal.String">&quot;title&quot;</span> <span class="na" data-token="Name.Attribute">style</span><span class="o" data-token="Operator">=</span><span class="s" data-token="Literal.String">&quot;color:#e11&quot;</span>&gt;I LOVE YOU ❤️&lt;/<span class="nt" data-token="Name.Tag">h1</span>&gt;
      &lt;<span class="nt" data-token="Name.Tag">p</span> <span class="na" data-token="Name.Attribute">class</span><span class="o" data-token="Operator">=</span><span class="s" data-token="Literal.String">&quot;sub&quot;</span>&gt;You caught them all!&lt;/<span class="nt" data-token="Name.Tag">p</span>&gt;
      &lt;<span class="nt" data-token="Name.Tag">div</span> <span class="na" data-token="Name.Attribute">class</span><span class="o" data-token="Operator">=</span><span class="s" data-token="Literal.String">&quot;row&quot;</span>&gt;&lt;<span class="nt" data-token="Name.Tag">button</span> <span class="na" data-token="Name.Attribute">id</span><span class="o" data-token="Operator">=</span><span class="s" data-token="Literal.String">&quot;restartBtn&quot;</span>&gt;Restart&lt;/<span class="nt" data-token="Name.Tag">button</span>&gt;&lt;/<span class="nt" data-token="Name.Tag">div</span>&gt;
    &lt;/<span class="nt" data-token="Name.Tag">div</span>&gt;
  &lt;/<span class="nt" data-token="Name.Tag">div</span>&gt;

  <span class="cm" data-token="Comment.Multiline">&lt;!-- Mobile controls --&gt;</span>
  &lt;<span class="nt" data-token="Name.Tag">div</span> <span class="na" data-token="Name.Attribute">id</span><span class="o" data-token="Operator">=</span><span class="s" data-token="Literal.String">&quot;controls&quot;</span>&gt;
    &lt;<span class="nt" data-token="Name.Tag">div</span> <span class="na" data-token="Name.Attribute">id</span><span class="o" data-token="Operator">=</span><span class="s" data-token="Literal.String">&quot;leftBtn&quot;</span> <span class="na" data-token="Name.Attribute">class</span><span class="o" data-token="Operator">=</span><span class="s" data-token="Literal.String">&quot;btn&quot;</span>&gt;⬅️&lt;/<span class="nt" data-token="Name.Tag">div</span>&gt;
    &lt;<span class="nt" data-token="Name.Tag">div</span> <span class="na" data-token="Name.Attribute">id</span><span class="o" data-token="Operator">=</span><span class="s" data-token="Literal.String">&quot;rightBtn&quot;</span> <span class="na" data-token="Name.Attribute">class</span><span class="o" data-token="Operator">=</span><span class="s" data-token="Literal.String">&quot;btn&quot;</span>&gt;➡️&lt;/<span class="nt" data-token="Name.Tag">div</span>&gt;
  &lt;/<span class="nt" data-token="Name.Tag">div</span>&gt;
  &lt;<span class="nt" data-token="Name.Tag">div</span> <span class="na" data-token="Name.Attribute">id</span><span class="o" data-token="Operator">=</span><span class="s" data-token="Literal.String">&quot;centerBtn&quot;</span> <span class="na" data-token="Name.Attribute">class</span><span class="o" data-token="Operator">=</span><span class="s" data-token="Literal.String">&quot;btn&quot;</span>&gt;🐶&lt;/<span class="nt" data-token="Name.Tag">div</span>&gt;

  &lt;<span class="nt" data-token="Name.Tag">div</span> <span class="na" data-token="Name.Attribute">class</span><span class="o" data-token="Operator">=</span><span class="s" data-token="Literal.String">&quot;help&quot;</span>&gt;Keys: ←/→ Jan • A/D Chewie • Click/Tap Chewie to animate&lt;/<span class="nt" data-token="Name.Tag">div</span>&gt;

  &lt;<span class="nt" data-token="Name.Tag">script</span>&gt;
  <span class="c1" data-token="Comment.Single">// === ASSETS (same folder as this HTML) ===</span>
  <span class="kd" data-token="Keyword.Declaration">const</span> ASSETS <span class="o" data-token="Operator">=</span> {
    jan<span class="o" data-token="Operator">:</span> <span class="s1" data-token="Literal.String.Single">&apos;jan_sprite.png&apos;</span>,            <span class="c1" data-token="Comment.Single">// 3 frames horizontally</span>
    chewie<span class="o" data-token="Operator">:</span> <span class="s1" data-token="Literal.String.Single">&apos;chewie_sprite.png&apos;</span>,      <span class="c1" data-token="Comment.Single">// 4 frames horizontally</span>
    heart<span class="o" data-token="Operator">:</span> <span class="s1" data-token="Literal.String.Single">&apos;heart.png&apos;</span>,
    background<span class="o" data-token="Operator">:</span> <span class="s1" data-token="Literal.String.Single">&apos;background.png&apos;</span>,
    sfx<span class="o" data-token="Operator">:</span> { <span class="k" data-token="Keyword">catch</span><span class="o" data-token="Operator">:</span> <span class="s1" data-token="Literal.String.Single">&apos;catch.wav&apos;</span>, win<span class="o" data-token="Operator">:</span> <span class="s1" data-token="Literal.String.Single">&apos;win.wav&apos;</span>, music<span class="o" data-token="Operator">:</span> <span class="s1" data-token="Literal.String.Single">&apos;loopB.wav&apos;</span> }
  };

  <span class="kd" data-token="Keyword.Declaration">const</span> canvas <span class="o" data-token="Operator">=</span> <span class="nb" data-token="Name.Builtin">document</span>.getElementById(<span class="s1" data-token="Literal.String.Single">&apos;game&apos;</span>);
  <span class="kd" data-token="Keyword.Declaration">const</span> ctx <span class="o" data-token="Operator">=</span> canvas.getContext(<span class="s1" data-token="Literal.String.Single">&apos;2d&apos;</span>);

  <span class="c1" data-token="Comment.Single">// --- Robust preload to avoid drawImage InvalidStateError ---</span>
  <span class="kd" data-token="Keyword.Declaration">let</span> imgBG, imgJan, imgChewie, imgHeart;
  <span class="kd" data-token="Keyword.Declaration">let</span> assetsReady <span class="o" data-token="Operator">=</span> <span class="kc" data-token="Keyword.Constant">false</span>;
  <span class="kd" data-token="Keyword.Declaration">let</span> loadProgress <span class="o" data-token="Operator">=</span> <span class="mf" data-token="Literal.Number.Float">0</span>;
  <span class="kd" data-token="Keyword.Declaration">const</span> TOTAL_IMAGES <span class="o" data-token="Operator">=</span> <span class="mf" data-token="Literal.Number.Float">4</span>;

  <span class="kd" data-token="Keyword.Declaration">function</span> loadImage(src){
    <span class="k" data-token="Keyword">return</span> <span class="ow" data-token="Operator.Word">new</span> <span class="nb" data-token="Name.Builtin">Promise</span>((resolve, reject)=&gt;{
      <span class="kd" data-token="Keyword.Declaration">const</span> img <span class="o" data-token="Operator">=</span> <span class="ow" data-token="Operator.Word">new</span> Image();
      img.addEventListener(<span class="s1" data-token="Literal.String.Single">&apos;load&apos;</span>, ()=&gt;{ loadProgress<span class="o" data-token="Operator">++</span>; resolve(img); });
      img.addEventListener(<span class="s1" data-token="Literal.String.Single">&apos;error&apos;</span>, (e)=&gt;{ console.error(<span class="s1" data-token="Literal.String.Single">&apos;Failed to load image:&apos;</span>, src, e); reject(e); });
      img.decoding <span class="o" data-token="Operator">=</span> <span class="s1" data-token="Literal.String.Single">&apos;async&apos;</span>;
      img.src <span class="o" data-token="Operator">=</span> src;
    });
  }

  <span class="kd" data-token="Keyword.Declaration">function</span> drawLoading(){
    ctx.clearRect(<span class="mf" data-token="Literal.Number.Float">0</span>,<span class="mf" data-token="Literal.Number.Float">0</span>,canvas.width,canvas.height);
    ctx.fillStyle <span class="o" data-token="Operator">=</span> <span class="s1" data-token="Literal.String.Single">&apos;#111&apos;</span>; ctx.fillRect(<span class="mf" data-token="Literal.Number.Float">0</span>,<span class="mf" data-token="Literal.Number.Float">0</span>,canvas.width,canvas.height);
    ctx.fillStyle <span class="o" data-token="Operator">=</span> <span class="s1" data-token="Literal.String.Single">&apos;#fff&apos;</span>; ctx.font<span class="o" data-token="Operator">=</span><span class="s1" data-token="Literal.String.Single">&apos;16px Arial&apos;</span>;
    ctx.fillText(<span class="s1" data-token="Literal.String.Single">&apos;Loading assets… &apos;</span><span class="o" data-token="Operator">+</span>loadProgress<span class="o" data-token="Operator">+</span><span class="s1" data-token="Literal.String.Single">&apos;/&apos;</span><span class="o" data-token="Operator">+</span>TOTAL_IMAGES, <span class="mf" data-token="Literal.Number.Float">12</span>, <span class="mf" data-token="Literal.Number.Float">24</span>);
    ctx.strokeStyle <span class="o" data-token="Operator">=</span> <span class="s1" data-token="Literal.String.Single">&apos;#fff&apos;</span>; ctx.strokeRect(<span class="mf" data-token="Literal.Number.Float">12</span>, <span class="mf" data-token="Literal.Number.Float">36</span>, canvas.width<span class="o" data-token="Operator">-</span><span class="mf" data-token="Literal.Number.Float">24</span>, <span class="mf" data-token="Literal.Number.Float">12</span>);
    ctx.fillStyle <span class="o" data-token="Operator">=</span> <span class="s1" data-token="Literal.String.Single">&apos;#fff&apos;</span>; ctx.fillRect(<span class="mf" data-token="Literal.Number.Float">12</span>, <span class="mf" data-token="Literal.Number.Float">36</span>, ((canvas.width<span class="o" data-token="Operator">-</span><span class="mf" data-token="Literal.Number.Float">24</span>)<span class="o" data-token="Operator">*</span>(loadProgress<span class="o" data-token="Operator">/</span>TOTAL_IMAGES))<span class="o" data-token="Operator">|</span><span class="mf" data-token="Literal.Number.Float">0</span>, <span class="mf" data-token="Literal.Number.Float">12</span>);
    <span class="k" data-token="Keyword">if</span>(<span class="o" data-token="Operator">!</span>assetsReady) requestAnimationFrame(drawLoading);
  }

  <span class="c1" data-token="Comment.Single">// --- Audio (unlocked on first interaction) ---</span>
  <span class="kd" data-token="Keyword.Declaration">const</span> sfxCatch <span class="o" data-token="Operator">=</span> <span class="ow" data-token="Operator.Word">new</span> Audio(ASSETS.sfx.<span class="k" data-token="Keyword">catch</span>);
  <span class="kd" data-token="Keyword.Declaration">const</span> sfxWin <span class="o" data-token="Operator">=</span> <span class="ow" data-token="Operator.Word">new</span> Audio(ASSETS.sfx.win);
  <span class="kd" data-token="Keyword.Declaration">const</span> bgMusic <span class="o" data-token="Operator">=</span> <span class="ow" data-token="Operator.Word">new</span> Audio(ASSETS.sfx.music); bgMusic.loop <span class="o" data-token="Operator">=</span> <span class="kc" data-token="Keyword.Constant">true</span>; bgMusic.volume <span class="o" data-token="Operator">=</span> <span class="mf" data-token="Literal.Number.Float">0.6</span>;

  <span class="c1" data-token="Comment.Single">// --- Game constants/state ---</span>
  <span class="kd" data-token="Keyword.Declaration">const</span> TOTAL_HEARTS <span class="o" data-token="Operator">=</span> <span class="mf" data-token="Literal.Number.Float">20</span>;                <span class="c1" data-token="Comment.Single">// must catch exactly 20</span>
  <span class="kd" data-token="Keyword.Declaration">const</span> HEART_SPEED <span class="o" data-token="Operator">=</span> <span class="mf" data-token="Literal.Number.Float">60</span>;                 <span class="c1" data-token="Comment.Single">// px/s</span>
  <span class="kd" data-token="Keyword.Declaration">const</span> JAN_SPEED <span class="o" data-token="Operator">=</span> <span class="mf" data-token="Literal.Number.Float">160</span>;
  <span class="kd" data-token="Keyword.Declaration">const</span> CHEWIE_SPEED <span class="o" data-token="Operator">=</span> <span class="mf" data-token="Literal.Number.Float">80</span>;
  <span class="kd" data-token="Keyword.Declaration">let</span> gameState <span class="o" data-token="Operator">=</span> <span class="s1" data-token="Literal.String.Single">&apos;start&apos;</span>;                <span class="c1" data-token="Comment.Single">// start, playing, win</span>
  <span class="kd" data-token="Keyword.Declaration">let</span> score <span class="o" data-token="Operator">=</span> <span class="mf" data-token="Literal.Number.Float">0</span>;
  <span class="kd" data-token="Keyword.Declaration">let</span> hearts <span class="o" data-token="Operator">=</span> [];
  <span class="kd" data-token="Keyword.Declaration">let</span> shower <span class="o" data-token="Operator">=</span> [];                         <span class="c1" data-token="Comment.Single">// celebration particles</span>
  <span class="kd" data-token="Keyword.Declaration">let</span> showerActive <span class="o" data-token="Operator">=</span> <span class="kc" data-token="Keyword.Constant">false</span>;
  <span class="kd" data-token="Keyword.Declaration">let</span> showerEndTime <span class="o" data-token="Operator">=</span> <span class="mf" data-token="Literal.Number.Float">0</span>;                   <span class="c1" data-token="Comment.Single">// stop spawning after 3s; each particle fades by 5s</span>

  <span class="c1" data-token="Comment.Single">// --- Entities ---</span>
  <span class="kd" data-token="Keyword.Declaration">const</span> jan <span class="o" data-token="Operator">=</span> { x<span class="o" data-token="Operator">:</span> <span class="mf" data-token="Literal.Number.Float">200</span>, y<span class="o" data-token="Operator">:</span> <span class="mf" data-token="Literal.Number.Float">256</span>, w<span class="o" data-token="Operator">:</span><span class="mf" data-token="Literal.Number.Float">32</span>, h<span class="o" data-token="Operator">:</span><span class="mf" data-token="Literal.Number.Float">32</span>, frame<span class="o" data-token="Operator">:</span><span class="mf" data-token="Literal.Number.Float">0</span>, frameTimer<span class="o" data-token="Operator">:</span><span class="mf" data-token="Literal.Number.Float">0</span> };
  <span class="kd" data-token="Keyword.Declaration">const</span> chewie <span class="o" data-token="Operator">=</span> { x<span class="o" data-token="Operator">:</span> <span class="mf" data-token="Literal.Number.Float">350</span>, y<span class="o" data-token="Operator">:</span> <span class="mf" data-token="Literal.Number.Float">256</span>, w<span class="o" data-token="Operator">:</span><span class="mf" data-token="Literal.Number.Float">32</span>, h<span class="o" data-token="Operator">:</span><span class="mf" data-token="Literal.Number.Float">32</span>, frame<span class="o" data-token="Operator">:</span><span class="mf" data-token="Literal.Number.Float">0</span>, frameTimer<span class="o" data-token="Operator">:</span><span class="mf" data-token="Literal.Number.Float">0</span>, idleTimer<span class="o" data-token="Operator">:</span><span class="mf" data-token="Literal.Number.Float">0</span>, overrideTimer<span class="o" data-token="Operator">:</span><span class="mf" data-token="Literal.Number.Float">0</span> };

  <span class="c1" data-token="Comment.Single">// Chewie idle cycle: stand(0) -&gt; wag-left(2) -&gt; stand(0) -&gt; wag-right(3)</span>
  <span class="kd" data-token="Keyword.Declaration">const</span> IDLE_SEQ <span class="o" data-token="Operator">=</span> [<span class="mf" data-token="Literal.Number.Float">0</span>,<span class="mf" data-token="Literal.Number.Float">2</span>,<span class="mf" data-token="Literal.Number.Float">0</span>,<span class="mf" data-token="Literal.Number.Float">3</span>];
  <span class="kd" data-token="Keyword.Declaration">let</span> idleIndex <span class="o" data-token="Operator">=</span> <span class="mf" data-token="Literal.Number.Float">0</span>;

  <span class="c1" data-token="Comment.Single">// --- Input ---</span>
  <span class="kd" data-token="Keyword.Declaration">const</span> keys <span class="o" data-token="Operator">=</span> {};
  <span class="nb" data-token="Name.Builtin">document</span>.addEventListener(<span class="s1" data-token="Literal.String.Single">&apos;keydown&apos;</span>, e=&gt;keys[e.key]<span class="o" data-token="Operator">=</span><span class="kc" data-token="Keyword.Constant">true</span>);
  <span class="nb" data-token="Name.Builtin">document</span>.addEventListener(<span class="s1" data-token="Literal.String.Single">&apos;keyup&apos;</span>, e=&gt;keys[e.key]<span class="o" data-token="Operator">=</span><span class="kc" data-token="Keyword.Constant">false</span>);

  <span class="kd" data-token="Keyword.Declaration">function</span> bindBtn(id, onDown, onUp){
    <span class="kd" data-token="Keyword.Declaration">const</span> el <span class="o" data-token="Operator">=</span> <span class="nb" data-token="Name.Builtin">document</span>.getElementById(id);
    <span class="k" data-token="Keyword">if</span>(<span class="o" data-token="Operator">!</span>el) <span class="k" data-token="Keyword">return</span>;
    el.addEventListener(<span class="s1" data-token="Literal.String.Single">&apos;touchstart&apos;</span>, e=&gt;{e.preventDefault(); onDown()});
    el.addEventListener(<span class="s1" data-token="Literal.String.Single">&apos;touchend&apos;</span>, e=&gt;{e.preventDefault(); onUp<span class="o" data-token="Operator">&amp;&amp;</span>onUp()});
    el.addEventListener(<span class="s1" data-token="Literal.String.Single">&apos;mousedown&apos;</span>, onDown);
    el.addEventListener(<span class="s1" data-token="Literal.String.Single">&apos;mouseup&apos;</span>, onUp<span class="o" data-token="Operator">||</span>(()=&gt;{}));
  }
  <span class="kd" data-token="Keyword.Declaration">let</span> holdLeft<span class="o" data-token="Operator">=</span><span class="kc" data-token="Keyword.Constant">false</span>, holdRight<span class="o" data-token="Operator">=</span><span class="kc" data-token="Keyword.Constant">false</span>;
  bindBtn(<span class="s1" data-token="Literal.String.Single">&apos;leftBtn&apos;</span>, ()=&gt;holdLeft<span class="o" data-token="Operator">=</span><span class="kc" data-token="Keyword.Constant">true</span>, ()=&gt;holdLeft<span class="o" data-token="Operator">=</span><span class="kc" data-token="Keyword.Constant">false</span>);
  bindBtn(<span class="s1" data-token="Literal.String.Single">&apos;rightBtn&apos;</span>, ()=&gt;holdRight<span class="o" data-token="Operator">=</span><span class="kc" data-token="Keyword.Constant">true</span>, ()=&gt;holdRight<span class="o" data-token="Operator">=</span><span class="kc" data-token="Keyword.Constant">false</span>);
  bindBtn(<span class="s1" data-token="Literal.String.Single">&apos;centerBtn&apos;</span>, ()=&gt;triggerChewie(), <span class="kc" data-token="Keyword.Constant">null</span>);

  <span class="c1" data-token="Comment.Single">// Start/Restart buttons (also unlock audio policies)</span>
  <span class="nb" data-token="Name.Builtin">document</span>.getElementById(<span class="s1" data-token="Literal.String.Single">&apos;startBtn&apos;</span>).addEventListener(<span class="s1" data-token="Literal.String.Single">&apos;click&apos;</span>, startGame);
  <span class="nb" data-token="Name.Builtin">document</span>.getElementById(<span class="s1" data-token="Literal.String.Single">&apos;restartBtn&apos;</span>).addEventListener(<span class="s1" data-token="Literal.String.Single">&apos;click&apos;</span>, startGame);

  <span class="c1" data-token="Comment.Single">// Click/tap chewie to animate quickly</span>
  canvas.addEventListener(<span class="s1" data-token="Literal.String.Single">&apos;click&apos;</span>, (e)=&gt;{
    <span class="kd" data-token="Keyword.Declaration">const</span> {left, top} <span class="o" data-token="Operator">=</span> canvas.getBoundingClientRect();
    <span class="kd" data-token="Keyword.Declaration">const</span> mx <span class="o" data-token="Operator">=</span> (e.clientX <span class="o" data-token="Operator">-</span> left) <span class="o" data-token="Operator">*</span> (canvas.width <span class="o" data-token="Operator">/</span> canvas.clientWidth);
    <span class="kd" data-token="Keyword.Declaration">const</span> my <span class="o" data-token="Operator">=</span> (e.clientY <span class="o" data-token="Operator">-</span> top) <span class="o" data-token="Operator">*</span> (canvas.height <span class="o" data-token="Operator">/</span> canvas.clientHeight);
    <span class="k" data-token="Keyword">if</span>(pointIn(mx,my, chewie)) triggerChewie();
  });
  canvas.addEventListener(<span class="s1" data-token="Literal.String.Single">&apos;touchstart&apos;</span>, (e)=&gt;{
    <span class="kd" data-token="Keyword.Declaration">const</span> t <span class="o" data-token="Operator">=</span> e.touches[<span class="mf" data-token="Literal.Number.Float">0</span>]; <span class="k" data-token="Keyword">if</span>(<span class="o" data-token="Operator">!</span>t) <span class="k" data-token="Keyword">return</span>;
    <span class="kd" data-token="Keyword.Declaration">const</span> {left, top} <span class="o" data-token="Operator">=</span> canvas.getBoundingClientRect();
    <span class="kd" data-token="Keyword.Declaration">const</span> mx <span class="o" data-token="Operator">=</span> (t.clientX <span class="o" data-token="Operator">-</span> left) <span class="o" data-token="Operator">*</span> (canvas.width <span class="o" data-token="Operator">/</span> canvas.clientWidth);
    <span class="kd" data-token="Keyword.Declaration">const</span> my <span class="o" data-token="Operator">=</span> (t.clientY <span class="o" data-token="Operator">-</span> top) <span class="o" data-token="Operator">*</span> (canvas.height <span class="o" data-token="Operator">/</span> canvas.clientHeight);
    <span class="k" data-token="Keyword">if</span>(pointIn(mx,my, chewie)) triggerChewie();
  });

  <span class="kd" data-token="Keyword.Declaration">function</span> pointIn(px,py, r){ <span class="k" data-token="Keyword">return</span> px<span class="o" data-token="Operator">&gt;=</span>r.x <span class="o" data-token="Operator">&amp;&amp;</span> px<span class="o" data-token="Operator">&lt;=</span>r.x<span class="o" data-token="Operator">+</span>r.w <span class="o" data-token="Operator">&amp;&amp;</span> py<span class="o" data-token="Operator">&gt;=</span>r.y <span class="o" data-token="Operator">&amp;&amp;</span> py<span class="o" data-token="Operator">&lt;=</span>r.y<span class="o" data-token="Operator">+</span>r.h }

  <span class="kd" data-token="Keyword.Declaration">function</span> startGame(){
    score <span class="o" data-token="Operator">=</span> <span class="mf" data-token="Literal.Number.Float">0</span>; hearts.length <span class="o" data-token="Operator">=</span> <span class="mf" data-token="Literal.Number.Float">0</span>; shower.length <span class="o" data-token="Operator">=</span> <span class="mf" data-token="Literal.Number.Float">0</span>; showerActive <span class="o" data-token="Operator">=</span> <span class="kc" data-token="Keyword.Constant">false</span>;
    gameState <span class="o" data-token="Operator">=</span> <span class="s1" data-token="Literal.String.Single">&apos;playing&apos;</span>;
    <span class="nb" data-token="Name.Builtin">document</span>.getElementById(<span class="s1" data-token="Literal.String.Single">&apos;startOverlay&apos;</span>).style.display<span class="o" data-token="Operator">=</span><span class="s1" data-token="Literal.String.Single">&apos;none&apos;</span>;
    <span class="nb" data-token="Name.Builtin">document</span>.getElementById(<span class="s1" data-token="Literal.String.Single">&apos;winOverlay&apos;</span>).style.display<span class="o" data-token="Operator">=</span><span class="s1" data-token="Literal.String.Single">&apos;none&apos;</span>;

    <span class="c1" data-token="Comment.Single">// position characters</span>
    jan.x <span class="o" data-token="Operator">=</span> <span class="mf" data-token="Literal.Number.Float">200</span>; chewie.x <span class="o" data-token="Operator">=</span> <span class="mf" data-token="Literal.Number.Float">350</span>; jan.frame<span class="o" data-token="Operator">=</span><span class="mf" data-token="Literal.Number.Float">0</span>; chewie.frame<span class="o" data-token="Operator">=</span><span class="mf" data-token="Literal.Number.Float">0</span>;

    <span class="c1" data-token="Comment.Single">// spawn 20 hearts staggered vertically</span>
    <span class="k" data-token="Keyword">for</span>(<span class="kd" data-token="Keyword.Declaration">let</span> i<span class="o" data-token="Operator">=</span><span class="mf" data-token="Literal.Number.Float">0</span>;i<span class="o" data-token="Operator">&lt;</span>TOTAL_HEARTS;i<span class="o" data-token="Operator">++</span>){
      hearts.push({ x<span class="o" data-token="Operator">:</span> <span class="mf" data-token="Literal.Number.Float">20</span> <span class="o" data-token="Operator">+</span> <span class="nb" data-token="Name.Builtin">Math</span>.random()<span class="o" data-token="Operator">*</span><span class="mf" data-token="Literal.Number.Float">440</span>, y<span class="o" data-token="Operator">:</span> <span class="o" data-token="Operator">-</span><span class="nb" data-token="Name.Builtin">Math</span>.random()<span class="o" data-token="Operator">*</span><span class="mf" data-token="Literal.Number.Float">600</span> <span class="o" data-token="Operator">-</span> i<span class="o" data-token="Operator">*</span><span class="mf" data-token="Literal.Number.Float">25</span>, w<span class="o" data-token="Operator">:</span><span class="mf" data-token="Literal.Number.Float">20</span>, h<span class="o" data-token="Operator">:</span><span class="mf" data-token="Literal.Number.Float">20</span>, caught<span class="o" data-token="Operator">:</span><span class="kc" data-token="Keyword.Constant">false</span> });
    }
    <span class="k" data-token="Keyword">try</span>{ bgMusic.currentTime <span class="o" data-token="Operator">=</span> <span class="mf" data-token="Literal.Number.Float">0</span>; bgMusic.play(); }<span class="k" data-token="Keyword">catch</span>(err){}
  }

  <span class="kd" data-token="Keyword.Declaration">function</span> triggerChewie(){
    <span class="c1" data-token="Comment.Single">// 0: stand, 1: belly-up, 2: wag-left, 3: wag-right</span>
    chewie.overrideTimer <span class="o" data-token="Operator">=</span> <span class="mf" data-token="Literal.Number.Float">0.8</span>; <span class="c1" data-token="Comment.Single">// seconds of fast cycle override</span>
  }

  <span class="c1" data-token="Comment.Single">// --- Loop (starts only after assetsReady) ---</span>
  <span class="kd" data-token="Keyword.Declaration">let</span> last <span class="o" data-token="Operator">=</span> performance.now();
  <span class="kd" data-token="Keyword.Declaration">function</span> loop(now){
    <span class="k" data-token="Keyword">if</span>(<span class="o" data-token="Operator">!</span>assetsReady){ <span class="k" data-token="Keyword">return</span>; }
    <span class="kd" data-token="Keyword.Declaration">const</span> dt <span class="o" data-token="Operator">=</span> <span class="nb" data-token="Name.Builtin">Math</span>.min(<span class="mf" data-token="Literal.Number.Float">0.05</span>, (now<span class="o" data-token="Operator">-</span>last)<span class="o" data-token="Operator">/</span><span class="mf" data-token="Literal.Number.Float">1000</span>); <span class="c1" data-token="Comment.Single">// clamp 50ms</span>
    last <span class="o" data-token="Operator">=</span> now;
    update(dt); draw();
    requestAnimationFrame(loop);
  }

  <span class="kd" data-token="Keyword.Declaration">function</span> update(dt){
    <span class="k" data-token="Keyword">if</span>(gameState<span class="o" data-token="Operator">!==</span><span class="s1" data-token="Literal.String.Single">&apos;playing&apos;</span>) <span class="k" data-token="Keyword">return</span>;

    <span class="c1" data-token="Comment.Single">// Move Jan – Arrow keys or mobile buttons</span>
    <span class="kd" data-token="Keyword.Declaration">let</span> moving <span class="o" data-token="Operator">=</span> <span class="kc" data-token="Keyword.Constant">false</span>;
    <span class="k" data-token="Keyword">if</span>(keys[<span class="s1" data-token="Literal.String.Single">&apos;ArrowLeft&apos;</span>]<span class="o" data-token="Operator">||</span>holdLeft){ jan.x <span class="o" data-token="Operator">-=</span> JAN_SPEED<span class="o" data-token="Operator">*</span>dt; moving<span class="o" data-token="Operator">=</span><span class="kc" data-token="Keyword.Constant">true</span>; }
    <span class="k" data-token="Keyword">if</span>(keys[<span class="s1" data-token="Literal.String.Single">&apos;ArrowRight&apos;</span>]<span class="o" data-token="Operator">||</span>holdRight){ jan.x <span class="o" data-token="Operator">+=</span> JAN_SPEED<span class="o" data-token="Operator">*</span>dt; moving<span class="o" data-token="Operator">=</span><span class="kc" data-token="Keyword.Constant">true</span>; }
    jan.x <span class="o" data-token="Operator">=</span> <span class="nb" data-token="Name.Builtin">Math</span>.max(<span class="mf" data-token="Literal.Number.Float">0</span>, <span class="nb" data-token="Name.Builtin">Math</span>.min(canvas.width <span class="o" data-token="Operator">-</span> jan.w, jan.x));
    <span class="c1" data-token="Comment.Single">// Jan 3-frame walk: 0 idle, 1 walk1, 2 walk2</span>
    <span class="k" data-token="Keyword">if</span>(moving){ jan.frameTimer <span class="o" data-token="Operator">+=</span> dt; <span class="k" data-token="Keyword">if</span>(jan.frameTimer<span class="o" data-token="Operator">&gt;</span><span class="mf" data-token="Literal.Number.Float">0.12</span>){ jan.frame<span class="o" data-token="Operator">=</span>(jan.frame<span class="o" data-token="Operator">+</span><span class="mf" data-token="Literal.Number.Float">1</span>)<span class="o" data-token="Operator">%</span><span class="mf" data-token="Literal.Number.Float">3</span>; jan.frameTimer<span class="o" data-token="Operator">=</span><span class="mf" data-token="Literal.Number.Float">0</span>; } }
    <span class="k" data-token="Keyword">else</span> { jan.frame<span class="o" data-token="Operator">=</span><span class="mf" data-token="Literal.Number.Float">0</span>; jan.frameTimer<span class="o" data-token="Operator">=</span><span class="mf" data-token="Literal.Number.Float">0</span>; }

    <span class="c1" data-token="Comment.Single">// Chewie drift via A/D keys</span>
    <span class="k" data-token="Keyword">if</span>(keys[<span class="s1" data-token="Literal.String.Single">&apos;a&apos;</span>]<span class="o" data-token="Operator">||</span>keys[<span class="s1" data-token="Literal.String.Single">&apos;A&apos;</span>]) chewie.x <span class="o" data-token="Operator">-=</span> CHEWIE_SPEED<span class="o" data-token="Operator">*</span>dt;
    <span class="k" data-token="Keyword">if</span>(keys[<span class="s1" data-token="Literal.String.Single">&apos;d&apos;</span>]<span class="o" data-token="Operator">||</span>keys[<span class="s1" data-token="Literal.String.Single">&apos;D&apos;</span>]) chewie.x <span class="o" data-token="Operator">+=</span> CHEWIE_SPEED<span class="o" data-token="Operator">*</span>dt;
    chewie.x <span class="o" data-token="Operator">=</span> <span class="nb" data-token="Name.Builtin">Math</span>.max(<span class="mf" data-token="Literal.Number.Float">0</span>, <span class="nb" data-token="Name.Builtin">Math</span>.min(canvas.width <span class="o" data-token="Operator">-</span> chewie.w, chewie.x));

    <span class="c1" data-token="Comment.Single">// Chewie animation</span>
    <span class="k" data-token="Keyword">if</span>(chewie.overrideTimer<span class="o" data-token="Operator">&gt;</span><span class="mf" data-token="Literal.Number.Float">0</span>){
      chewie.overrideTimer <span class="o" data-token="Operator">-=</span> dt;
      chewie.frameTimer <span class="o" data-token="Operator">+=</span> dt;
      <span class="k" data-token="Keyword">if</span>(chewie.frameTimer<span class="o" data-token="Operator">&gt;</span><span class="mf" data-token="Literal.Number.Float">0.08</span>){ chewie.frame <span class="o" data-token="Operator">=</span> (chewie.frame<span class="o" data-token="Operator">+</span><span class="mf" data-token="Literal.Number.Float">1</span>)<span class="o" data-token="Operator">%</span><span class="mf" data-token="Literal.Number.Float">4</span>; chewie.frameTimer <span class="o" data-token="Operator">=</span> <span class="mf" data-token="Literal.Number.Float">0</span>; }
    } <span class="k" data-token="Keyword">else</span> {
      <span class="c1" data-token="Comment.Single">// Idle cycle: stand/wag-left/stand/wag-right</span>
      chewie.idleTimer <span class="o" data-token="Operator">+=</span> dt;
      <span class="k" data-token="Keyword">if</span>(chewie.idleTimer<span class="o" data-token="Operator">&gt;</span><span class="mf" data-token="Literal.Number.Float">0.35</span>){ chewie.idleTimer<span class="o" data-token="Operator">=</span><span class="mf" data-token="Literal.Number.Float">0</span>; idleIndex<span class="o" data-token="Operator">=</span>(idleIndex<span class="o" data-token="Operator">+</span><span class="mf" data-token="Literal.Number.Float">1</span>)<span class="o" data-token="Operator">%</span>IDLE_SEQ.length; chewie.frame <span class="o" data-token="Operator">=</span> IDLE_SEQ[idleIndex]; }
    }

    <span class="c1" data-token="Comment.Single">// Hearts falling &amp; catching</span>
    <span class="k" data-token="Keyword">for</span>(<span class="kd" data-token="Keyword.Declaration">const</span> h <span class="k" data-token="Keyword">of</span> hearts){
      <span class="k" data-token="Keyword">if</span>(h.caught) <span class="k" data-token="Keyword">continue</span>;
      h.y <span class="o" data-token="Operator">+=</span> HEART_SPEED <span class="o" data-token="Operator">*</span> dt;
      <span class="k" data-token="Keyword">if</span>(aabb(h, jan)){
        h.caught <span class="o" data-token="Operator">=</span> <span class="kc" data-token="Keyword.Constant">true</span>; score<span class="o" data-token="Operator">++</span>; <span class="k" data-token="Keyword">try</span>{ sfxCatch.currentTime<span class="o" data-token="Operator">=</span><span class="mf" data-token="Literal.Number.Float">0</span>; sfxCatch.play(); }<span class="k" data-token="Keyword">catch</span>(err){}
        <span class="k" data-token="Keyword">if</span>(score<span class="o" data-token="Operator">&gt;=</span>TOTAL_HEARTS){
          gameState<span class="o" data-token="Operator">=</span><span class="s1" data-token="Literal.String.Single">&apos;win&apos;</span>;
          <span class="k" data-token="Keyword">try</span>{ bgMusic.pause(); sfxWin.play(); }<span class="k" data-token="Keyword">catch</span>(err){}
          startShower();
        }
      }
      <span class="k" data-token="Keyword">if</span>(h.y<span class="o" data-token="Operator">&gt;</span>canvas.height){ h.y <span class="o" data-token="Operator">=</span> <span class="o" data-token="Operator">-</span><span class="mf" data-token="Literal.Number.Float">20</span>; h.x <span class="o" data-token="Operator">=</span> <span class="mf" data-token="Literal.Number.Float">20</span> <span class="o" data-token="Operator">+</span> <span class="nb" data-token="Name.Builtin">Math</span>.random()<span class="o" data-token="Operator">*</span><span class="mf" data-token="Literal.Number.Float">440</span>; }
    }

    <span class="c1" data-token="Comment.Single">// Win shower particles</span>
    <span class="k" data-token="Keyword">if</span>(showerActive){
      <span class="k" data-token="Keyword">for</span>(<span class="kd" data-token="Keyword.Declaration">const</span> p <span class="k" data-token="Keyword">of</span> shower){
        p.vy <span class="o" data-token="Operator">+=</span> <span class="mf" data-token="Literal.Number.Float">10</span><span class="o" data-token="Operator">*</span>dt; p.y <span class="o" data-token="Operator">+=</span> p.vy <span class="o" data-token="Operator">*</span> dt; p.life <span class="o" data-token="Operator">-=</span> dt; p.alpha <span class="o" data-token="Operator">=</span> <span class="nb" data-token="Name.Builtin">Math</span>.max(<span class="mf" data-token="Literal.Number.Float">0</span>, p.life<span class="o" data-token="Operator">/</span><span class="mf" data-token="Literal.Number.Float">5</span>);
      }
      shower <span class="o" data-token="Operator">=</span> shower.filter(p=&gt;p.life<span class="o" data-token="Operator">&gt;</span><span class="mf" data-token="Literal.Number.Float">0</span> <span class="o" data-token="Operator">&amp;&amp;</span> p.y<span class="o" data-token="Operator">&lt;</span>canvas.height<span class="o" data-token="Operator">+</span><span class="mf" data-token="Literal.Number.Float">30</span>);
      <span class="c1" data-token="Comment.Single">// spawn new hearts for first 3 seconds</span>
      <span class="k" data-token="Keyword">if</span>(performance.now() <span class="o" data-token="Operator">&lt;</span> showerEndTime){ spawnShowerBurst(<span class="mf" data-token="Literal.Number.Float">8</span>); }
      <span class="c1" data-token="Comment.Single">// After ~5s total, show restart (ensure message stays)</span>
      <span class="k" data-token="Keyword">if</span>(performance.now() <span class="o" data-token="Operator">&gt;</span> showerEndTime <span class="o" data-token="Operator">+</span> <span class="mf" data-token="Literal.Number.Float">2000</span>){ <span class="nb" data-token="Name.Builtin">document</span>.getElementById(<span class="s1" data-token="Literal.String.Single">&apos;winOverlay&apos;</span>).style.display<span class="o" data-token="Operator">=</span><span class="s1" data-token="Literal.String.Single">&apos;grid&apos;</span>; }
    }
  }

  <span class="kd" data-token="Keyword.Declaration">function</span> draw(){
    <span class="k" data-token="Keyword">if</span>(<span class="o" data-token="Operator">!</span>assetsReady){ <span class="k" data-token="Keyword">return</span>; }
    ctx.clearRect(<span class="mf" data-token="Literal.Number.Float">0</span>,<span class="mf" data-token="Literal.Number.Float">0</span>,canvas.width,canvas.height);
    ctx.drawImage(imgBG,<span class="mf" data-token="Literal.Number.Float">0</span>,<span class="mf" data-token="Literal.Number.Float">0</span>,canvas.width,canvas.height);

    <span class="c1" data-token="Comment.Single">// Score</span>
    ctx.fillStyle <span class="o" data-token="Operator">=</span> <span class="s1" data-token="Literal.String.Single">&apos;#000&apos;</span>; ctx.font <span class="o" data-token="Operator">=</span> <span class="s1" data-token="Literal.String.Single">&apos;16px Arial&apos;</span>; ctx.fillText(<span class="sb" data-token="Literal.String.Backtick">`Caught: </span><span class="si" data-token="Literal.String.Interpol">${</span>score<span class="si" data-token="Literal.String.Interpol">}</span><span class="sb" data-token="Literal.String.Backtick">/</span><span class="si" data-token="Literal.String.Interpol">${</span>TOTAL_HEARTS<span class="si" data-token="Literal.String.Interpol">}</span><span class="sb" data-token="Literal.String.Backtick">`</span> ,<span class="mf" data-token="Literal.Number.Float">10</span>,<span class="mf" data-token="Literal.Number.Float">20</span>);

    <span class="c1" data-token="Comment.Single">// Hearts</span>
    <span class="k" data-token="Keyword">for</span>(<span class="kd" data-token="Keyword.Declaration">const</span> h <span class="k" data-token="Keyword">of</span> hearts){ <span class="k" data-token="Keyword">if</span>(<span class="o" data-token="Operator">!</span>h.caught) ctx.drawImage(imgHeart, h.x, h.y, h.w, h.h); }

    <span class="c1" data-token="Comment.Single">// Draw Chewie first so Jan can overlap</span>
    drawSprite(imgChewie, chewie.frame, <span class="mf" data-token="Literal.Number.Float">4</span>, chewie.x, chewie.y, chewie.w, chewie.h);
    <span class="c1" data-token="Comment.Single">// Draw Jan</span>
    drawSprite(imgJan, jan.frame, <span class="mf" data-token="Literal.Number.Float">3</span>, jan.x, jan.y, jan.w, jan.h);

    <span class="c1" data-token="Comment.Single">// Celebration hearts</span>
    <span class="k" data-token="Keyword">if</span>(showerActive){
      <span class="k" data-token="Keyword">for</span>(<span class="kd" data-token="Keyword.Declaration">const</span> p <span class="k" data-token="Keyword">of</span> shower){
        ctx.globalAlpha <span class="o" data-token="Operator">=</span> p.alpha;
        ctx.drawImage(imgHeart, p.x, p.y, p.size, p.size);
      }
      ctx.globalAlpha <span class="o" data-token="Operator">=</span> <span class="mf" data-token="Literal.Number.Float">1</span>;
    }

    <span class="k" data-token="Keyword">if</span>(gameState<span class="o" data-token="Operator">===</span><span class="s1" data-token="Literal.String.Single">&apos;start&apos;</span>){
      <span class="nb" data-token="Name.Builtin">document</span>.getElementById(<span class="s1" data-token="Literal.String.Single">&apos;startOverlay&apos;</span>).style.display<span class="o" data-token="Operator">=</span><span class="s1" data-token="Literal.String.Single">&apos;grid&apos;</span>;
    }
  }

  <span class="kd" data-token="Keyword.Declaration">function</span> aabb(a,b){ <span class="k" data-token="Keyword">return</span> a.x <span class="o" data-token="Operator">&lt;</span> b.x<span class="o" data-token="Operator">+</span>b.w <span class="o" data-token="Operator">&amp;&amp;</span> a.x<span class="o" data-token="Operator">+</span>a.w <span class="o" data-token="Operator">&gt;</span> b.x <span class="o" data-token="Operator">&amp;&amp;</span> a.y <span class="o" data-token="Operator">&lt;</span> b.y<span class="o" data-token="Operator">+</span>b.h <span class="o" data-token="Operator">&amp;&amp;</span> a.y<span class="o" data-token="Operator">+</span>a.h <span class="o" data-token="Operator">&gt;</span> b.y; }
  <span class="kd" data-token="Keyword.Declaration">function</span> drawSprite(img, frame, framesAcross, x,y,w,h){
    <span class="kd" data-token="Keyword.Declaration">const</span> fw <span class="o" data-token="Operator">=</span> (img.width<span class="o" data-token="Operator">/</span>framesAcross)<span class="o" data-token="Operator">|</span><span class="mf" data-token="Literal.Number.Float">0</span>; <span class="kd" data-token="Keyword.Declaration">const</span> fh <span class="o" data-token="Operator">=</span> img.height<span class="o" data-token="Operator">|</span><span class="mf" data-token="Literal.Number.Float">0</span>;
    <span class="kd" data-token="Keyword.Declaration">const</span> sx <span class="o" data-token="Operator">=</span> <span class="nb" data-token="Name.Builtin">Math</span>.max(<span class="mf" data-token="Literal.Number.Float">0</span>, <span class="nb" data-token="Name.Builtin">Math</span>.min(framesAcross<span class="o" data-token="Operator">-</span><span class="mf" data-token="Literal.Number.Float">1</span>, <span class="nb" data-token="Name.Builtin">Math</span>.floor(frame))) <span class="o" data-token="Operator">*</span> fw;
    ctx.drawImage(img, sx, <span class="mf" data-token="Literal.Number.Float">0</span>, fw, fh, x, y, w, h);
  }

  <span class="c1" data-token="Comment.Single">// --- Celebration helpers ---</span>
  <span class="kd" data-token="Keyword.Declaration">function</span> startShower(){
    showerActive <span class="o" data-token="Operator">=</span> <span class="kc" data-token="Keyword.Constant">true</span>;
    showerEndTime <span class="o" data-token="Operator">=</span> performance.now() <span class="o" data-token="Operator">+</span> <span class="mf" data-token="Literal.Number.Float">3000</span>; <span class="c1" data-token="Comment.Single">// spawn for first 3s</span>
    <span class="k" data-token="Keyword">for</span>(<span class="kd" data-token="Keyword.Declaration">let</span> i<span class="o" data-token="Operator">=</span><span class="mf" data-token="Literal.Number.Float">0</span>;i<span class="o" data-token="Operator">&lt;</span><span class="mf" data-token="Literal.Number.Float">24</span>;i<span class="o" data-token="Operator">++</span>) spawnShowerBurst(<span class="mf" data-token="Literal.Number.Float">6</span>); <span class="c1" data-token="Comment.Single">// initial burst</span>
  }
  <span class="kd" data-token="Keyword.Declaration">function</span> spawnShowerBurst(n){
    <span class="k" data-token="Keyword">for</span>(<span class="kd" data-token="Keyword.Declaration">let</span> i<span class="o" data-token="Operator">=</span><span class="mf" data-token="Literal.Number.Float">0</span>;i<span class="o" data-token="Operator">&lt;</span>n;i<span class="o" data-token="Operator">++</span>){
      <span class="kd" data-token="Keyword.Declaration">const</span> size <span class="o" data-token="Operator">=</span> <span class="mf" data-token="Literal.Number.Float">10</span> <span class="o" data-token="Operator">+</span> <span class="nb" data-token="Name.Builtin">Math</span>.random()<span class="o" data-token="Operator">*</span><span class="mf" data-token="Literal.Number.Float">18</span>;
      shower.push({ x<span class="o" data-token="Operator">:</span> <span class="nb" data-token="Name.Builtin">Math</span>.random()<span class="o" data-token="Operator">*</span>canvas.width, y<span class="o" data-token="Operator">:</span> <span class="o" data-token="Operator">-</span><span class="mf" data-token="Literal.Number.Float">20</span>, vy<span class="o" data-token="Operator">:</span> <span class="mf" data-token="Literal.Number.Float">50</span><span class="o" data-token="Operator">+</span><span class="nb" data-token="Name.Builtin">Math</span>.random()<span class="o" data-token="Operator">*</span><span class="mf" data-token="Literal.Number.Float">120</span>, size, life<span class="o" data-token="Operator">:</span><span class="mf" data-token="Literal.Number.Float">5</span>, alpha<span class="o" data-token="Operator">:</span><span class="mf" data-token="Literal.Number.Float">1</span> }); <span class="c1" data-token="Comment.Single">// fade over 5s</span>
    }
  }

  <span class="c1" data-token="Comment.Single">// --- Kick off preloading then main loop ---</span>
  <span class="kd" data-token="Keyword.Declaration">function</span> preload(){
    drawLoading();
    <span class="nb" data-token="Name.Builtin">Promise</span>.all([
      loadImage(ASSETS.background).then(i=&gt;imgBG<span class="o" data-token="Operator">=</span>i),
      loadImage(ASSETS.jan).then(i=&gt;imgJan<span class="o" data-token="Operator">=</span>i),
      loadImage(ASSETS.chewie).then(i=&gt;imgChewie<span class="o" data-token="Operator">=</span>i),
      loadImage(ASSETS.heart).then(i=&gt;imgHeart<span class="o" data-token="Operator">=</span>i)
    ]).then(()=&gt;{
      assetsReady <span class="o" data-token="Operator">=</span> <span class="kc" data-token="Keyword.Constant">true</span>;
      requestAnimationFrame(loop);
    }).<span class="k" data-token="Keyword">catch</span>(()=&gt;{
      ctx.fillStyle <span class="o" data-token="Operator">=</span> <span class="s1" data-token="Literal.String.Single">&apos;#000&apos;</span>; ctx.fillRect(<span class="mf" data-token="Literal.Number.Float">0</span>,<span class="mf" data-token="Literal.Number.Float">0</span>,canvas.width,canvas.height);
      ctx.fillStyle <span class="o" data-token="Operator">=</span> <span class="s1" data-token="Literal.String.Single">&apos;#fff&apos;</span>; ctx.font <span class="o" data-token="Operator">=</span> <span class="s1" data-token="Literal.String.Single">&apos;16px Arial&apos;</span>;
      ctx.fillText(<span class="s1" data-token="Literal.String.Single">&apos;⚠️ Failed to load images. Place files next to this HTML.&apos;</span>, <span class="mf" data-token="Literal.Number.Float">10</span>, <span class="mf" data-token="Literal.Number.Float">24</span>);
    });
  }

  <span class="c1" data-token="Comment.Single">// Start the preload</span>
  preload();
  &lt;/<span class="nt" data-token="Name.Tag">script</span>&gt;
&lt;/<span class="nt" data-token="Name.Tag">body</span>&gt;
&lt;/<span class="nt" data-token="Name.Tag">html</span>&gt;
  </pre>
</body>
</html>